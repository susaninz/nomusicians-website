name: Telegram Notifications

on:
  issues:
    types: [assigned, closed]
  issue_comment:
    types: [created]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Telegram notification on issue assigned
        if: github.event_name == 'issues' && github.event.action == 'assigned'
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="HTML" \
            -d disable_web_page_preview="true" \
            -d text="ğŸ“‹ <b>ĞĞ¾Ğ²Ğ°Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°</b>%0A%0A<b>${{ github.event.issue.title }}</b>%0A%0AğŸ‘¤ Ğ˜ÑĞ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒ: ${{ github.event.assignee.login }}%0AğŸ”— <a href='${{ github.event.issue.html_url }}'>ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ</a>"

      - name: Send Telegram notification on issue closed
        if: github.event_name == 'issues' && github.event.action == 'closed'
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="HTML" \
            -d disable_web_page_preview="true" \
            -d text="âœ… <b>Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ°</b>%0A%0A<b>${{ github.event.issue.title }}</b>%0A%0AğŸ‘¤ Ğ—Ğ°ĞºÑ€Ñ‹Ğ»: ${{ github.event.sender.login }}%0AğŸ”— <a href='${{ github.event.issue.html_url }}'>ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ</a>"

      - name: Send Telegram notification on comment
        if: github.event_name == 'issue_comment' && github.event.action == 'created'
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="HTML" \
            -d disable_web_page_preview="true" \
            -d text="ğŸ’¬ <b>ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹</b>%0A%0AĞš Ğ·Ğ°Ğ´Ğ°Ñ‡Ğµ: <b>${{ github.event.issue.title }}</b>%0A%0A${{ github.event.comment.body }}%0A%0AğŸ‘¤ ${{ github.event.comment.user.login }}%0AğŸ”— <a href='${{ github.event.comment.html_url }}'>ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ</a>"
