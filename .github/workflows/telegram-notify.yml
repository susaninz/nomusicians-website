name: Telegram Notifications

on:
  issues:
    types: [opened, assigned, closed]
  issue_comment:
    types: [created]
  # Project card events (limited support for Projects V2)
  project_card:
    types: [created, moved]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Telegram notification on new issue
        if: github.event_name == 'issues' && github.event.action == 'opened'
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="HTML" \
            -d text="üìã <b>–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</b>%0A%0A<b>${{ github.event.issue.title }}</b>%0A%0A${{ github.event.issue.body }}%0A%0Aüë§ –ê–≤—Ç–æ—Ä: ${{ github.event.issue.user.login }}%0Aüîó <a href='${{ github.event.issue.html_url }}'>–û—Ç–∫—Ä—ã—Ç—å</a>"

      - name: Send Telegram notification on issue assigned
        if: github.event_name == 'issues' && github.event.action == 'assigned'
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="HTML" \
            -d text="üë§ <b>–ó–∞–¥–∞—á–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞</b>%0A%0A<b>${{ github.event.issue.title }}</b>%0A%0A–ù–∞–∑–Ω–∞—á–µ–Ω–∞: ${{ github.event.assignee.login }}%0Aüîó <a href='${{ github.event.issue.html_url }}'>–û—Ç–∫—Ä—ã—Ç—å</a>"

      - name: Send Telegram notification on issue closed
        if: github.event_name == 'issues' && github.event.action == 'closed'
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="HTML" \
            -d text="‚úÖ <b>–ó–∞–¥–∞—á–∞ –∑–∞–∫—Ä—ã—Ç–∞</b>%0A%0A<b>${{ github.event.issue.title }}</b>%0A%0Aüë§ –ó–∞–∫—Ä—ã–ª: ${{ github.event.sender.login }}%0Aüîó <a href='${{ github.event.issue.html_url }}'>–û—Ç–∫—Ä—ã—Ç—å</a>"

      - name: Send Telegram notification on comment
        if: github.event_name == 'issue_comment' && github.event.action == 'created'
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="HTML" \
            -d text="üí¨ <b>–ù–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</b>%0A%0A–ö –∑–∞–¥–∞—á–µ: <b>${{ github.event.issue.title }}</b>%0A%0A${{ github.event.comment.body }}%0A%0Aüë§ –ê–≤—Ç–æ—Ä: ${{ github.event.comment.user.login }}%0Aüîó <a href='${{ github.event.comment.html_url }}'>–û—Ç–∫—Ä—ã—Ç—å</a>"

