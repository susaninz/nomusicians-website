---
import type { Lang } from '../i18n/translations';
import { t } from '../i18n/translations';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;

// Release data (will come from Sanity later)
const releases = {
  live: [
    {
      title: 'Live at Ogonek \'23',
      year: '2023',
      cover: 'https://i1.sndcdn.com/artworks-UfA1u4o6nC3lOHLP-UD1xhg-t500x500.jpg',
      spotify: 'https://open.spotify.com/artist/1qLMx7d1hfZHkN5Z3oHjun',
      soundcloud: 'https://soundcloud.com/nomusicians/live-set-on-ogonek-23-burning-time-thursday',
    },
    {
      title: 'Jam Loft \'23',
      year: '2023',
      cover: 'https://i1.sndcdn.com/artworks-h7O3ynC8tA2F9u0m-1v1Z1A-t500x500.jpg',
      spotify: 'https://open.spotify.com/artist/1qLMx7d1hfZHkN5Z3oHjun',
      soundcloud: 'https://soundcloud.com/nomusicians/sets/jam-loft',
    },
    {
      title: 'Qatar \'22',
      year: '2022',
      cover: 'https://i1.sndcdn.com/artworks-cUOBBYwJffF4tq2v-AxKsjg-t500x500.jpg',
      spotify: 'https://open.spotify.com/artist/1qLMx7d1hfZHkN5Z3oHjun',
      soundcloud: 'https://soundcloud.com/nomusicians/meanwhile-at-heenat-salma-featdmitry-skvortsov',
    },
    {
      title: 'Boring Room \'20',
      year: '2020',
      cover: 'https://i1.sndcdn.com/artworks-WxJuW5xVBuHdSJ7N-lVGzWA-t500x500.jpg',
      spotify: 'https://open.spotify.com/artist/1qLMx7d1hfZHkN5Z3oHjun',
      soundcloud: 'https://soundcloud.com/nomusicians/sets/boring-room-live-stream-20',
    },
    {
      title: 'Blanc \'19',
      year: '2019',
      cover: 'https://i1.sndcdn.com/artworks-000567167055-y5p4qt-t500x500.jpg',
      spotify: 'https://open.spotify.com/artist/1qLMx7d1hfZHkN5Z3oHjun',
      soundcloud: 'https://soundcloud.com/nomusicians/mammoth-firs-live',
    },
  ],
  studio: [
    {
      title: 'Noch 3.0',
      year: '2023',
      cover: 'https://i1.sndcdn.com/artworks-8OaZwxwomCGKTBBt-Xkl3Gg-t500x500.jpg',
      spotify: 'https://open.spotify.com/artist/1qLMx7d1hfZHkN5Z3oHjun',
      soundcloud: 'https://soundcloud.com/nomusicians/noch-3',
    },
    {
      title: 'That Wedding',
      year: '2022',
      cover: 'https://i1.sndcdn.com/artworks-K6jJj4O4rq23xo7p-IiuGXA-t500x500.jpg',
      spotify: 'https://open.spotify.com/album/0EjD6dBjVYsHMqU3QBRZNH',
      soundcloud: 'https://soundcloud.com/itsgoodtobeatree/sets/dima-ustinov-nomusicians-that-wedding',
      label: 'ItsGoodToBeATree',
    },
    {
      title: 'Paraphonic',
      year: '2025',
      cover: 'https://i1.sndcdn.com/artworks-4pxyOWc0x6nYhv5f-cEQT7Q-t500x500.jpg',
      spotify: 'https://open.spotify.com/artist/1qLMx7d1hfZHkN5Z3oHjun',
      soundcloud: 'https://soundcloud.com/nomusicians/ajh-pads',
    },
    {
      title: '5pulse',
      year: '2024',
      cover: 'https://i1.sndcdn.com/artworks-LpE3Aahmz3w0evQA-1GWqYw-t500x500.jpg',
      spotify: 'https://open.spotify.com/artist/1qLMx7d1hfZHkN5Z3oHjun',
      soundcloud: 'https://soundcloud.com/nomusicians/5pulse',
    },
  ],
};
---

<section id="releases" class="py-24 px-6">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-3xl md:text-4xl font-light tracking-wide text-center mb-12">
      {t(lang, 'releases.title')}
    </h2>
    
    <!-- Tabs -->
    <div class="flex justify-center gap-8 mb-12">
      <button 
        class="release-tab text-lg tracking-wider uppercase text-white border-b-2 border-white pb-2 transition-all"
        data-tab="live"
      >
        {t(lang, 'releases.live')}
      </button>
      <button 
        class="release-tab text-lg tracking-wider uppercase text-muted border-b-2 border-transparent pb-2 hover:text-white transition-all"
        data-tab="studio"
      >
        {t(lang, 'releases.studio')}
      </button>
    </div>
    
    <!-- Live Releases Grid -->
    <div id="releases-live" class="release-content grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {releases.live.map((release) => (
        <a 
          href={release.soundcloud} 
          target="_blank" 
          rel="noopener noreferrer"
          class="group"
        >
          <div class="aspect-square overflow-hidden mb-3">
            <img 
              src={release.cover} 
              alt={release.title}
              class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
              loading="lazy"
            />
          </div>
          <h3 class="text-sm md:text-base font-light tracking-wide text-center uppercase">
            {release.title}
          </h3>
          <p class="text-xs text-muted text-center mt-1">
            {release.year}
          </p>
        </a>
      ))}
    </div>
    
    <!-- Studio Releases Grid -->
    <div id="releases-studio" class="release-content hidden grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {releases.studio.map((release) => (
        <a 
          href={release.soundcloud} 
          target="_blank" 
          rel="noopener noreferrer"
          class="group"
        >
          <div class="aspect-square overflow-hidden mb-3">
            <img 
              src={release.cover} 
              alt={release.title}
              class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
              loading="lazy"
            />
          </div>
          <h3 class="text-sm md:text-base font-light tracking-wide text-center uppercase">
            {release.title}
          </h3>
          <p class="text-xs text-muted text-center mt-1">
            {release.year}
            {release.label && <span class="ml-2 text-white/50">Â· {release.label}</span>}
          </p>
        </a>
      ))}
    </div>
  </div>
</section>

<script>
  const tabs = document.querySelectorAll('.release-tab');
  const contents = document.querySelectorAll('.release-content');
  
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      const targetTab = tab.getAttribute('data-tab');
      
      // Update tabs styles
      tabs.forEach(t => {
        t.classList.remove('text-white', 'border-white');
        t.classList.add('text-muted', 'border-transparent');
      });
      tab.classList.remove('text-muted', 'border-transparent');
      tab.classList.add('text-white', 'border-white');
      
      // Show/hide content
      contents.forEach(content => {
        content.classList.add('hidden');
      });
      document.getElementById(`releases-${targetTab}`)?.classList.remove('hidden');
    });
  });
</script>

